(function(t){var a,e=t(".mapContainer"),n=t(".main"),o=t(".mapManage"),i=(t(window),500),s=80,r="/",l="/images/",c=(t(window).height(),t(window).width(),t("html,body"),t(".addInfos"),t(".banner"),t(".nav")),d=t(".mapItem"),p=t(".mapItem .accordeon"),u=(t("body"),t(".kots").outerHeight(),t(".mapItem .tab")),f=0,g=(t(".mapManage .search .content"),t("#zoom"),t(".researchBtn")),h=t(".ListingBtn"),m=t(".switchView"),v=t(".mapManage .research"),b=t(".mapManage .oneBuilding"),y=(t('input[type="submit"]'),t("form"),t("#form-city"),t("input[data-disabled]"),t(".overlay")),k=(t(".helper"),t(".closeTuto")),w=t(".notDisplayThisTuto"),x=t(".notDisplayAllTuto"),S=t(".popup"),D=t(".popup.lang"),L=t(".popup.connection"),I=(t(".popup.agence"),t(".closePopup")),j=t(".toSocialLogin"),T=t(".toEmailLogin"),C=t(".loginEmail"),E=t(".loginSocial"),_=t(".toPopup"),A=t(".errorsNotifications"),P=t(".errorsNotifications .tab"),z=(t(".errorsNotifications .list"),0),N=(t(".warning-tick"),t(".warning-tick-box"),t(".closeTickbox"),t("#query"),t(".kots #container"),t(".kot:last").offset(),t(".loadmore"),t(".pagination"),t(".pagination ul"),t(".agenceAjax"),t(".deleteImage")),O=t(".deleteAdvertImage");t(function(){J(),p.drags({handle:".head"}),t(".typeLocation")&&V(),P.on("click","a",R),t("html").on("click",K),A.on("click",function(t){t.stopPropagation()}),ia(),sa(),u.on("click","a",G),_.on("click",aa),t(document).keyup(function(t){27==t.keyCode&&ea(t)}),I.on("click",ea),y.on("click",function(t){na(t)}),c.find(".connection").on("click","a",aa),j.on("click",Z),T.on("click",ta),t(window).resize(function(){ia(t(window).height()),sa(t(window).width())}),t(".goTo").on("click",function(a){a.preventDefault(),ra(t("#main"))}),g.on("click",q),h.on("click",Y),k.on("click",X),w.on("click",Q),x.on("click",Q),t("form").on("submit",function(){t(this).prop("disabled",!0),t(this).val(t(this).attr("data-disabled"))}),H(),N.on("click",function(a){a.preventDefault(),$(t(this))}),O.on("click",function(a){a.preventDefault(),F(t(this))}),t(".note_propriete input").on("change",function(){t(this).parent().siblings().removeClass("checked"),t(this).is(":checked")&&(t(this).parent().addClass("checked"),t(this).parent().prevAll().addClass("checked"))}),t(window).scroll(function(){t(this).scrollTop()>t(window).height()?t(".back-to-top").fadeIn():t(".back-to-top").fadeOut()}),t(".back-to-top").click(function(a){return a.preventDefault(),t("html, body").animate({scrollTop:0},300),!1}),t(".photoProfile").on("change",function(){t(this).parent().submit()})});var B=function(){t("#sortable").sortable({create:function(){var a={};t("#sortable li").each(function(e,n){var o=t(n).find("a").attr("data-id");a[o]=t(n).index()+1}),t("form > [name='image_order']").val(JSON.stringify(a))}})},$=function(a){t.ajax({type:"get",url:r+"ajax/deleteImage/"+a.attr("data-id")+"/"+a.attr("data-proprieteId")+"/"+a.attr("data-type"),dataType:"json",success:function(e){"success"===e&&a.parent().fadeOut("fast",function(){t(this).remove()})}})},F=function(a){t.ajax({type:"get",url:r+"ajax/deleteAdvertImage/"+a.attr("data-id")+"/"+a.attr("data-locationId"),dataType:"json",success:function(e){"success"===e&&a.parent().fadeOut("fast",function(){t(this).remove()})}})},M=function(t,a){var e=t.split(".");return e[0]+"-"+a+"."+e[1]},U=function(a,e,n){a&&e&&t.ajax({type:"get",url:r+"ajax/getBuildingPhoto/"+n+"/"+e,dataType:"json",success:function(o){o&&(0==t('#images[data-type="'+n+'"]').length&&t('#baseForm[data-type="'+n+'"]').after('<div id="images" data-type='+n+'><ul id="sortable" class="ui-sortable" data-type="building"></ul></div>'),t('#images[data-type="'+n+'"]').find("li").remove());for(var i in o)t('#images[data-type="'+n+'"] ul').append('<li><span class="handle icon icon-move6"></span><a href="" class="deleteImage icon icon-remove11" data-id='+o[i].id+" data-proprieteId="+o[i].building_id+" data-type="+o[i].type+" title="+oLang.form.delete_image+'><div class="image"><img class="thumbnail" src="'+l+"users/"+a+"/buildings/"+e+"/"+M(o[i].url,"small")+'"></div></a></li>'),t(".deleteImage").on("click",function(a){a.preventDefault(),$(t(this))});B()}})},W=function(a,e,n){a&&e&&t.ajax({type:"get",url:r+"ajax/getLocationPhoto/"+n+"/"+e,dataType:"json",success:function(o){o&&(0==t('#images[data-type="'+n+'"]').length&&t("#baseForm").after('<div id="images" data-type='+n+'><ul id="sortable" class="ui-sortable" data-type="location"></ul></div>'),t('#images[data-type="'+n+'"]').find("li").remove());for(var i in o)t('#images[data-type="'+n+'"] ul').append('<li><span class="handle icon icon-move6"></span><a href="" class="deleteAdvertImage icon icon-remove11" data-id='+o[i].id+" data-locationId="+o[i].building_id+"  title="+oLang.form.delete_image+'><div class="image"><img class="thumbnail" src="'+l+"users/"+a+"/locations/"+e+"/"+M(o[i].url,"small")+'"></div></a></li>'),t(".deleteAdvertImage").on("click",function(a){a.preventDefault(),F(t(this))});B()}})},H=function(){settingsUpload=t(".mulitplefileuploader").each(function(){var a=t(this).parent().attr("data-proprieteId"),e=t(this).parent().attr("data-type"),n=t(this);t(this).uploadFile({url:r+"ajax/uploadBuildingImage/"+e+"/"+a,method:"get",allowedTypes:"jpg,gif,bmp,png",fileName:"file",autoSubmit:!0,multiple:!0,showStatusAfterSuccess:!1,dragDropStr:"<span><b>"+oLang.upload.dragDrop+"</b></span>",abortStr:oLang.upload.giveup,cancelStr:oLang.upload.stop,doneStr:oLang.upload.ok,multiDragErrorStr:oLang.upload.multiDrag,extErrorStr:oLang.upload.ext_error,sizeErrorStr:oLang.upload.size_error,uploadErrorStr:oLang.upload.not_allow,onSubmit:function(a){t("<input>").attr({type:"text",name:"file[]",value:a}).appendTo("#myform")},onSuccess:function(){t("#myform").submit(),U(n.parent().attr("data-userId"),n.parent().attr("data-proprieteId"),n.parent().attr("data-type"))},onError:function(){t("#status").html("<font color='green'>Something Wrong</font>")}})}),settingsAdvertUpload=t(".mulitpleLocationfileuploader").each(function(){var a=t(this).parent().attr("data-locationId"),e=t(this).parent().attr("data-type"),n=t(this);t(this).uploadFile({url:r+"ajax/uploadLocationImage/"+e+"/"+a,method:"get",allowedTypes:"jpg,gif,bmp,png",fileName:"file",autoSubmit:!0,multiple:!0,showStatusAfterSuccess:!1,dragDropStr:"<span><b>"+oLang.upload.dragDrop+"</b></span>",abortStr:oLang.upload.giveup,cancelStr:oLang.upload.stop,doneStr:oLang.upload.ok,multiDragErrorStr:oLang.upload.multiDrag,extErrorStr:oLang.upload.ext_error,sizeErrorStr:oLang.upload.size_error,uploadErrorStr:oLang.upload.not_allow,onSubmit:function(a){t("<input>").attr({type:"text",name:"file[]",value:a}).appendTo("#myform")},onSuccess:function(a,e){"object"==typeof e&&alert(e.error),t("#myform").submit(),W(n.parent().attr("data-userId"),n.parent().attr("data-locationId"),n.parent().attr("data-type"))},onError:function(){t("#status").html("<font color='green'>Something Wrong</font>")}})})},Q=function(a){a.preventDefault(),t.ajax({url:"createCookie/"+t(this).attr("data-name")}),X(a,t(this).parent())},X=function(a,e){a.preventDefault(),"undefined"!=typeof e?e.parent().css("display","none"):t(this).parent().css("display","none")},Y=function(a){a.preventDefault();var e=t(this);v.css("display","none"),b.css("display","block"),m.find("a").removeClass("active"),e.addClass("active")},q=function(a){a.preventDefault();var e=t(this);b.css("display","none"),v.css("display","block"),m.find("a").removeClass("active"),e.addClass("active")},J=function(){t.ajax({type:"get",async:!1,url:"/getAllLang",dataType:"json",success:function(t){return oLang=t,!0}})},V=function(){t(".typeLocation li").each(function(){$checkbox=t(this).find('input[type="checkbox"]'),$checkbox.css({visibility:"hidden",position:"absolute",left:"-99999999px"}),t(this).find("label").css({backgroundImage:"url(./img/"+$checkbox.attr("data-background")+")",backgroundPosition:"top",width:"100%",height:100,paddingTop:60,display:"block"})})},G=function(t){t.preventDefault(),0===f?(d.css({left:"-220px"}),f=1):(d.css({left:"12px"}),f=0)},K=function(t){t.stopPropagation(),1===z&&(A.css({right:"-250px"}),z=0)},R=function(t){t.preventDefault(),0===z?(A.css({right:"12px"}),z=1):(A.css({right:"-250px"}),z=0)},Z=function(t){t.preventDefault(),C.slideUp(function(){E.slideDown()})},ta=function(t){t.preventDefault(),E.slideUp(function(){C.slideDown()})},aa=function(a){a.preventDefault(),a.stopPropagation();var e=t(this).attr("data-type");"lang"===e?(y.css("display","block"),D.css("display","block")):"connection"===e&&(y.css("display","block"),L.css("display","block"))},ea=function(t){t.preventDefault(),S.fadeOut("fast",function(){oa()})},na=function(t){t.preventDefault(),S.fadeOut("fast",function(){oa()})},oa=function(){y.css("display","none")},ia=function(r){e&&(a=r?(r-t(".banner").height())/100*s:(t(window).height()-t(".banner").height())/100*s,e.css({height:a,width:t(window).width()-240,"min-height":i}),o.css({height:a,"min-height":i}),n.css({height:"auto","min-height":"100%"}))},sa=function(){},ra=function(a){t("html,body").animate({scrollTop:a.offset().top},"slow")}}).call(this,jQuery),function(t){t.fn.drags=function(a){if($that=t(this),a=t.extend({handle:"",cursor:"move"},a),""===a.handle)var e=this;else var e=this.find(a.handle);return e.css("cursor",a.cursor).on("mousedown",function(e){if(e.stopPropagation(),""===a.handle)var n=t(this).addClass("draggable");else{var n=t(this).addClass("active-handle");$that.addClass("draggable")}var o=n.css("z-index"),i=n.outerHeight(),s=n.outerWidth(),r=n.offset().top+i-e.pageY,l=n.offset().left+s-e.pageX;n.css("z-index",1e3).parents().on("mousemove",function(a){t(".draggable").offset({top:a.pageY+r-i,left:a.pageX+l-s}).on("mouseup",function(){t(this).removeClass("draggable").css("z-index",o)})}),e.preventDefault()}).on("mouseup",function(){""===a.handle?t(this).removeClass("draggable"):t(this).removeClass("active-handle").parent().removeClass("draggable")})}}.call(this,jQuery);