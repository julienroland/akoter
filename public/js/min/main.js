(function(t){{var a,e=t(".mapContainer"),o=t(".main"),n=t(".mapManage"),i=(t(window),500),s=80,r="/",c="/images/",l=(t(window).height(),t(window).width(),t("html,body"),t(".addInfos"),t(".banner"),t(".nav")),d=t(".mapItem"),u=t(".mapItem .accordeon"),p=(t("body"),t(".kots").outerHeight(),t(".mapItem .tab")),f=0,g=(t(".mapManage .search .content"),t("#zoom"),t(".researchBtn")),h=t(".ListingBtn"),m=t(".switchView"),v=t(".mapManage .research"),b=t(".mapManage .oneBuilding"),y=(t('input[type="submit"]'),t("form"),t("#form-city"),t("input[data-disabled]"),t(".overlay")),k=(t(".helper"),t(".closeTuto")),w=t(".notDisplayThisTuto"),x=t(".notDisplayAllTuto"),D=t(".popup"),L=t(".popup.lang"),S=t(".popup.connection"),C=(t(".popup.agence"),t(".closePopup")),I=t(".toSocialLogin"),j=t(".toEmailLogin"),T=t(".loginEmail"),P=t(".loginSocial"),z=t(".toPopup"),E=t(".errorsNotifications"),B=t(".errorsNotifications .tab"),N=(t(".errorsNotifications .list"),0);t(".warning-tick"),t(".warning-tick-box"),t(".closeTickbox"),t("#query"),t(".kots #container"),t(".kot:last").offset(),t(".loadmore"),t(".pagination"),t(".pagination ul"),t(".agenceAjax")}t(function(){Q(),u.drags({handle:".head"}),t(".typeLocation")&&W(),B.on("click","a",q),t("html").on("click",Y),E.on("click",function(t){t.stopPropagation()}),ta(),aa(),p.on("click","a",X),z.on("click",G),t(document).keyup(function(t){27==t.keyCode&&K(t)}),C.on("click",K),y.on("click",function(t){R(t)}),l.find(".connection").on("click","a",G),I.on("click",J),j.on("click",V),t(window).resize(function(){ta(t(window).height()),aa(t(window).width())}),t(".goTo").on("click",function(a){a.preventDefault(),ea(t("#main"))}),g.on("click",H),h.on("click",F),k.on("click",U),w.on("click",O),x.on("click",O),t("form").on("submit",function(){t(this).prop("disabled",!0),t(this).val(t(this).attr("data-disabled"))}),M()});var $=function(){t("#sortable").sortable({create:function(){var a={};t("#sortable li").each(function(e,o){var n=t(o).find("a").attr("data-id");a[n]=t(o).index()+1}),t("form > [name='image_order']").val(JSON.stringify(a))}})},_=function(a){t.ajax({type:"get",async:!1,url:r+"deleteImage/"+a.attr("data-id")+"/"+a.attr("data-proprieteId"),dataType:"json",success:function(e){"success"===e&&a.parent().fadeOut("fast",function(){t(this).remove()})}})},A=function(a,e,o){a&&e&&t.ajax({type:"get",url:r+"ajax/getBuildingPhoto/"+o+"/"+e,dataType:"json",success:function(n){n=n.data,n&&(0==t("#images").length&&t("#baseForm").after('<div id="images"><ul id="sortable" class="ui-sortable"></ul></div>'),t("#images").find("li").remove());for(var i in n)t("#images ul").append('<li><div class="image"><img src="'+c+"users/"+a+"/buildings/"+e+"/ "+o+"/"+n[i].url+'"></div><a href="" class="supprimerImage" data-id="'+n[i].id+'" data-proprieteId="'+e+'" title="'+oLang.form.delete+'">'+oLang.form.delete_image+"</a></li>"),t(".supprimerImage").on("click",function(a){a.preventDefault(),_(t(this))});$()}})},M=function(){var a=t("form").attr("data-proprieteId"),e=t("form").attr("data-type");settingsUpload=t("#mulitplefileuploader").uploadFile({url:r+"ajax/uploadBuildingImage/"+e+"/"+a,method:"post",allowedTypes:"jpg,gif,bmp,png",fileName:"file",autoSubmit:!0,multiple:!0,showStatusAfterSuccess:!0,dragDropStr:"<span><b>"+oLang.upload.dragDrop+"</b></span>",abortStr:oLang.upload.giveup,cancelStr:oLang.upload.stop,doneStr:oLang.upload.ok,multiDragErrorStr:oLang.upload.multiDrag,extErrorStr:oLang.upload.ext_error,sizeErrorStr:oLang.upload.size_error,uploadErrorStr:oLang.upload.not_allow,onSubmit:function(a){t("<input>").attr({type:"text",name:"file[]",value:a}).appendTo("#myform")},onSuccess:function(){t("#myform").submit(),A(t("form").attr("data-userId"),t("form").attr("data-proprieteId"),t("form").attr("data-type"))},onError:function(){t("#status").html("<font color='green'>Something Wrong</font>")}})},O=function(a){a.preventDefault(),t.ajax({url:"createCookie/"+t(this).attr("data-name")}),U(a,t(this).parent())},U=function(a,e){a.preventDefault(),"undefined"!=typeof e?e.parent().css("display","none"):t(this).parent().css("display","none")},F=function(a){a.preventDefault();var e=t(this);v.css("display","none"),b.css("display","block"),m.find("a").removeClass("active"),e.addClass("active")},H=function(a){a.preventDefault();var e=t(this);b.css("display","none"),v.css("display","block"),m.find("a").removeClass("active"),e.addClass("active")},Q=function(){t.ajax({type:"get",async:!1,url:"/getAllLang",dataType:"json",success:function(t){return oLang=t,console.log(t),!0}})},W=function(){t(".typeLocation li").each(function(){$checkbox=t(this).find('input[type="checkbox"]'),$checkbox.css({visibility:"hidden",position:"absolute",left:"-99999999px"}),t(this).find("label").css({backgroundImage:"url(./img/"+$checkbox.attr("data-background")+")",backgroundPosition:"top",width:"100%",height:100,paddingTop:60,display:"block"})})},X=function(t){t.preventDefault(),0===f?(d.css({left:"-220px"}),f=1):(d.css({left:"12px"}),f=0)},Y=function(t){t.stopPropagation(),1===N&&(E.css({right:"-250px"}),N=0)},q=function(t){t.preventDefault(),0===N?(E.css({right:"12px"}),N=1):(E.css({right:"-250px"}),N=0)},J=function(t){t.preventDefault(),T.slideUp(function(){P.slideDown()})},V=function(t){t.preventDefault(),P.slideUp(function(){T.slideDown()})},G=function(a){a.preventDefault(),a.stopPropagation();var e=t(this).attr("data-type");"lang"===e?(y.css("display","block"),L.css("display","block")):"connection"===e&&(y.css("display","block"),S.css("display","block"))},K=function(t){t.preventDefault(),D.fadeOut("fast",function(){Z()})},R=function(t){t.preventDefault(),D.fadeOut("fast",function(){Z()})},Z=function(){y.css("display","none")},ta=function(r){e&&(a=r?(r-t(".banner").height())/100*s:(t(window).height()-t(".banner").height())/100*s,e.css({height:a,width:t(window).width()-240,"min-height":i}),n.css({height:a,"min-height":i}),o.css({height:"auto","min-height":"100%"}))},aa=function(){},ea=function(a){t("html,body").animate({scrollTop:a.offset().top},"slow")}}).call(this,jQuery),function(t){t.fn.drags=function(a){if($that=t(this),a=t.extend({handle:"",cursor:"move"},a),""===a.handle)var e=this;else var e=this.find(a.handle);return e.css("cursor",a.cursor).on("mousedown",function(e){if(e.stopPropagation(),""===a.handle)var o=t(this).addClass("draggable");else{console.log(t(this));var o=t(this).addClass("active-handle");$that.addClass("draggable")}var n=o.css("z-index"),i=o.outerHeight(),s=o.outerWidth(),r=o.offset().top+i-e.pageY,c=o.offset().left+s-e.pageX;o.css("z-index",1e3).parents().on("mousemove",function(a){t(".draggable").offset({top:a.pageY+r-i,left:a.pageX+c-s}).on("mouseup",function(){t(this).removeClass("draggable").css("z-index",n)})}),e.preventDefault()}).on("mouseup",function(){""===a.handle?t(this).removeClass("draggable"):t(this).removeClass("active-handle").parent().removeClass("draggable")})}}.call(this,jQuery);