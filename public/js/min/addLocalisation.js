(function(e){"use strict";var o,n,t,a,l,i,g,s,p,d=new google.maps.LatLng(50.833,4.333),c=16,r=16,m=15,u=e('input[name="address"]'),f=e('input[name="region"]'),v=e('input[name="locality"]'),L=e('input[name="number"]'),w=e("#latlng"),y=e("#rechercheMap"),T="/img/building.png",h=new google.maps.Geocoder;e(function(){});var D=function(){M(),y.on("click",function(e){e.preventDefault(),b("geocoder")})},I=function(e,o){return"lat"===o?e.split(",")[0]:"lng"===o?e.split(",")[1]:void 0},M=function(){if(o=new google.maps.Map(document.getElementById("gmapLocalisation"),{center:d,zoom:7,disableDefaultUI:!1,scrollwheel:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP}),w&&w.val().length>0){var e=I(w.val(),"lat"),n=I(w.val(),"lng"),t=new google.maps.LatLng(e,n);A(t),o.setCenter(t),o.setZoom(m)}},b=function(d,y,T){if("geocoder"===d){if("undefined"!=typeof y)"adresse"===T?D=u.val():"region"===T?l=f.find("option:selected").text():"localite"===T&&(i=v.find("option:selected").text());else var D=e(this).val();l||(l=f.find("option:selected").text()),i||(i=v.find("option:selected").text()),D||(D=u.val()),g||(g=L.val());{({disableDefaultUI:!0,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,center:h.geocode({address:D+" "+g+" "+i+" "+l+" Belgique"},function(e,l){l===google.maps.GeocoderStatus.OK&&(t=e[0],s=t.geometry.location.lat(),p=t.geometry.location.lng(),a=new google.maps.LatLng(s,p),w.val(" "),w.val(s+","+p),"undefined"==typeof n?(w.val(" "),w.val(s+","+p),A(a),o.panTo(a),o.setZoom(r)):(w.val(" "),w.val(s+","+p),n.setPosition(a),o.panTo(a),o.setZoom("adresse"===T?c:"sous_region"===T?nZoomSousRegion:"localite"===T?m:r)))})})}}else w.val(" "),w.val(y.lat()+","+y.lng()),o.panTo(y)},A=function(e){n=new google.maps.Marker({position:e,animation:google.maps.Animation.DROP,map:o,draggable:!0,visible:!0,icon:T}),google.maps.event.addListener(n,"dragend",function(e){b("latlng",new google.maps.LatLng(e.latLng.lat(),e.latLng.lng()))}),google.maps.event.addListener(n,"click",function(e){o.setZoom(18),o.panTo(new google.maps.LatLng(e.latLng.lat(),e.latLng.lng()))})};google.maps.event.addDomListener(window,"load",D)}).call(this,jQuery);