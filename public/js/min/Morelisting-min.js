(function(t){var e=!1,n=t("#query"),o=t(".kots #container"),a=t(".kot:last").offset(),i,s,c=400,r="?page=",l=1,f=t(window),p=t(".loadmore"),d="../img/",u=t("#filterKot"),h=t("#locations"),g=t("#filterKot .clearAll"),v=t("#filterKot input, #filterKot select"),y=t(".pagination"),m=t(".sortmenu"),k=t(".sortmenu .searchBar"),b=t(".formActions"),x=t(".alertbox"),D=t(".classify"),L=t(".listing"),w=h.find(".map"),C=t(".filterType .filterItem"),P=d+"noPhotoLocation.jpg",T=t(".selectCharge"),g=t(".clearAll"),j=t(".pannel"),A=t(".toogleMap"),O=t(".toogleList"),I=y.find("li").length-2;t(function(){T.on("change",Q),t("html").on("click",N),y.attr("aria-hidden",!1).hide(),D.on("change",M),g.on("click",q),t(window).scroll(function(){E(),S()}),E(),b.on("click","a.goOn",z),b.on("click","a.submit",function(t){t.preventDefault(),u.submit()}),x.on("click",function(t){t.stopPropagation()}),C.on("click","a",J),A.on("click",F),O.on("click",K)});var K=function(e){e.preventDefault();var n=t(this);w.fadeOut("fast",function(){L.fadeIn(),j.find("a").removeClass("active"),n.addClass("active")})},F=function(e){e.preventDefault();var n=t(this);L.fadeOut("fast",function(){w.fadeIn(),j.find("a").removeClass("active"),n.addClass("active")})},M=function(){u.submit()},N=function(t){t.stopPropagation(),x.hide()},z=function(e){e.preventDefault(),e.stopPropagation(),t(this).parents(".alertbox").hide()},J=function(e){e.preventDefault(),e.stopPropagation(),x.hide(),t(this).siblings(".alertbox").toggle()},S=function(t){f.scrollTop()>=80?(m.css({position:"fixed",height:70,top:0}),k.css("display","none"),w.css({"padding-top":70}),L.css({"padding-top":94}),g.css("display","none"),j.css("display","none")):(m.css({position:"absolute",height:112,top:80}),k.css("display","block"),w.css({"padding-top":94}),L.css({"padding-top":136}),g.css("display","inline-block"),j.css("display","block"))},q=function(e){e.preventDefault(),t(":input",u).not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected"),u[0].reset()},B=function(e){e.preventDefault();var a=t(this).serialize(),i=JSON.parse(n.attr("data-data"));console.log(a),t.ajax({url:"/ajax/getLocationsFilter",type:"get",data:a,dataType:"json",success:function(e){o.find(".kot").remove(),s=[];for(var a in e.data)appendMoreLocation(e.data[a]);o.append(s),t("#locations #container").masonry("appended",s),t("#locations #container").masonry("appended",t(".kot.appended")),t("#locations #container").masonry(),i.nb=i.nb+e.data.length,n.attr("data-data",JSON.stringify(i)),offset=t(".kot:last").offset()}})},Q=function(){var e=t("#input-chargePrice");0==t(this).val()?e.parent().css("display","none"):e.parent().css("display","block")},E=function(){if(t(".kot:last").offset().top-2*c-f.height()<=f.scrollTop()&&0==e&&(e=!0,I>l)){l++;var n=u.serialize();t.get(r+l+"&"+n,function(n){var a=t(t(n).find("#container").html());o.append(a).masonry("appended",a,!0),offset=t(".kot:last").offset(),setTimeout(function(){e=!1,t(".kot:last").offset().top-2*c-f.height()<=f.scrollTop()&&0==e&&E()},3e3)})}},G=function(){var e=t("<link rel='stylesheet' type='text/css' href='../css/screen.css'>");t("head").append(e)},H=function(t){return Math.round(t)/2},R=function(t,e){return"lat"===e?t.split(",")[0]:t.split(",")[1]},U=function(e,n){if("undefined"!=typeof n){if("undefined"==typeof e)var e=oLang.key;var o=e;if("undefined"!=typeof e)return t.each(n,function(t,e){o=o.replace(":"+t,e)}),o}else{if("undefined"==typeof e)var e=oLang.key;var o=e;if("undefined"!=typeof e)return e}};t.fn.clearForm=function(){return this.each(function(){var e=this.type,n=this.tagName.toLowerCase();return"form"==n?t(":input",this).clearForm():void("text"==e||"password"==e||"textarea"==n?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==n&&(this.selectedIndex=-1))})}}).call(this,jQuery);