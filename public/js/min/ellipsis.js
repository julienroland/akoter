!function(e){function t(t,a){var o=t.data("jqae");o||(o={});var l=o.wrapperElement;l||(l=t.wrapInner("<div/>").find(">div"),l.css({margin:0,padding:0,border:0}));var s=l.data("jqae");s||(s={});var c=s.originalContent;c?l=s.originalContent.clone(!0).data("jqae",{originalContent:c}).replaceAll(l):l.data("jqae",{originalContent:l.clone(!0)}),t.data("jqae",{wrapperElement:l,containerWidth:t.width(),containerHeight:t.height()});var f=t.height(),h=(parseInt(t.css("padding-top"),10)||0)+(parseInt(t.css("border-top-width"),10)||0)-(l.offset().top-t.offset().top),d=!1,g=l;a.selector&&(g=e(l.find(a.selector).get().reverse())),g.each(function(){var t=e(this),o=t.text(),s=!1;if(l.innerHeight()-t.innerHeight()>f+h)t.remove();else if(r(t),t.contents().length){for(d&&(i(t).get(0).nodeValue+=a.ellipsis,d=!1);l.innerHeight()>f+h;){if(s=n(t),!s){d=!0,t.remove();break}if(r(t),!t.contents().length){d=!0,t.remove();break}i(t).get(0).nodeValue+=a.ellipsis}"onEllipsis"==a.setTitle&&s||"always"==a.setTitle?t.attr("title",o):"never"!=a.setTitle&&t.removeAttr("title")}})}function n(t){var n=i(t);if(n.length){var r=n.get(0).nodeValue,a=r.lastIndexOf(" ");return a>-1?(r=e.trim(r.substring(0,a)),n.get(0).nodeValue=r):n.get(0).nodeValue="",!0}return!1}function i(e){if(e.contents().length){var t=e.contents(),n=t.eq(t.length-1);return n.filter(a).length?n:i(n)}e.append("");var t=e.contents();return t.eq(t.length-1)}function r(t){if(t.contents().length){var n=t.contents(),i=n.eq(n.length-1);if(i.filter(a).length){var o=i.get(0).nodeValue;return o=e.trim(o),""==o?(i.remove(),!0):!1}for(;r(i););return i.contents().length?!1:(i.remove(),!0)}return!1}function a(){return 3===this.nodeType}function o(e,t){f[e]=t,c||(c=window.setInterval(function(){s()},200))}function l(e){f[e]&&(delete f[e],f.length||c&&(window.clearInterval(c),c=void 0))}function s(){if(!h){h=!0;for(var n in f)e(n).each(function(){var i,r;i=e(this),r=i.data("jqae"),(r.containerWidth!=i.width()||r.containerHeight!=i.height())&&t(i,f[n])});h=!1}}var c,f={},h=!1,d={ellipsis:"...",setTitle:"never",live:!1};e.fn.ellipsis=function(n,i){var r,a;return r=e(this),"string"!=typeof n&&(i=n,n=void 0),a=e.extend({},d,i),a.selector=n,r.each(function(){var n=e(this);t(n,a)}),a.live?o(r.selector,a):l(r.selector),this}}(jQuery);