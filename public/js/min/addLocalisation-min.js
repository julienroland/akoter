(function(e){"use strict";var o,n=new google.maps.LatLng(50.833,4.333),a,t,l,i,g=16,s=8,p=11,c=15,r=e('input[name="address"]'),d=e('input[name="region"]'),m=e('input[name="locality"]'),u=e("#latlng"),v=e("#rechercheMap"),f,L,w,y,M,h,T,D="/images/marker.png",I=new google.maps.Geocoder;e(function(){});var P=function(){b(),e("#rechercheMap").on("click",function(e){e.preventDefault(),k("geocoder")})},A=function(e,o){return"lat"===o?e.split(",")[0]:"lng"===o?e.split(",")[1]:void 0},b=function(){if(o=new google.maps.Map(document.getElementById("gmapLocalisation"),{center:n,zoom:4,disableDefaultUI:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP}),u&&u.val().length>0){var e=A(u.val(),"lat"),a=A(u.val(),"lng"),t=new google.maps.LatLng(e,a);x(t),o.setCenter(t),o.setZoom(c)}},k=function(n,a,v){if("geocoder"===n){if("undefined"!=typeof a)"adresse"===v?f=r.val():"region"===v?w=d.find("option:selected").text():"localite"===v&&(M=m.find("option:selected").text());else var f=e(this).val();w||(w=e("#region option:selected").text()),M||(M=e("#localite option:selected").text()),f||(f=e("#adresse").val()),console.log(f+" "+M+" "+w+" Belgique");var L={disableDefaultUI:!0,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,center:I.geocode({address:f+" "+M+" "+w+" Belgique"},function(e,n){n===google.maps.GeocoderStatus.OK&&(l=e[0],h=l.geometry.location.lat(),T=l.geometry.location.lng(),i=new google.maps.LatLng(h,T),u.val(" "),u.val(h+","+T),"undefined"==typeof t?(u.val(" "),u.val(h+","+T),x(i),o.panTo(i),o.setZoom("adresse"===v?g:"sous_region"===v?p:"localite"===v?c:s)):(u.val(" "),u.val(h+","+T),t.setPosition(i),o.panTo(i),o.setZoom("adresse"===v?g:"sous_region"===v?p:"localite"===v?c:s)))})}}else u.val(" "),u.val(a.lat()+","+a.lng()),o.panTo(a)},x=function(e){t=new google.maps.Marker({position:e,animation:google.maps.Animation.DROP,map:o,draggable:!0,visible:!0,icon:D}),google.maps.event.addListener(t,"dragend",function(e){k("latlng",new google.maps.LatLng(e.latLng.lat(),e.latLng.lng()))}),google.maps.event.addListener(t,"click",function(e){o.setZoom(18),o.panTo(new google.maps.LatLng(e.latLng.lat(),e.latLng.lng()))})},O=function(){var e=new google.maps.LatLng(oMyPosition.latitude,oMyPosition.longitude);o.panTo(e)};google.maps.event.addDomListener(window,"load",P)}).call(this,jQuery);