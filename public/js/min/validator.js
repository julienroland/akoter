(function(e){var s,r=e("form.rules"),a=e('form.rules input:not([data-validator="false"],[autocomplete="off"],[type="submit"],[type="reset"]):visible, textarea:not([data-validator="false"],[autocomplete="off"],[type="submit"],[type="reset"]),textarea:visible'),i=(e(".showPassword"),"/"),t=!1;e(function(){r.on("submit",n),a.keydown(o),a.keyup(o),a.focus(o)});var o=function(){"undefined"==typeof s&&(s=JSON.parse(e(this).parents("form.rules").attr("data-rules")));var r=e(this).attr("name"),a=e(this).val();r.indexOf("[")>-1&&(r=r.substring(r.lastIndexOf("[")+1,r.lastIndexOf("]")));var t=s[r],o=e(this);if(""!==a&&(("password-ck"===r||"password_ck"===r)&&(a=e(this).val()+":"+o.parents("form").find('input[name="password"]').val()),"email_bc"===r&&(a=e(this).val()+":"+o.parents("form").find('input[name="email"]').val())),""!==a)var n=i+"getOneValidation/"+r+"/"+t+"/"+a;else var n=i+"getOneValidation/"+r+"/"+t;console.log(n),e.ajax({url:n,dataType:"json",type:"post",success:function(s){if(e.isPlainObject(s)){var a=s;o.find("input").removeClass("form-error").siblings("icon-required").removeClass("error").siblings(".clear").remove(),o.siblings(".messageError").remove(),e.each(a.field,function(){o.addClass("form-error").siblings("icon-required").addClass("error")});for(var i in a.message)o.next(".icon-required").length<1?o.after('<span class="'+r+' messageError">'+a.message[i]+"<span>"):o.next(".icon-required").after('<div class="clear"></div><span class="'+r+' messageError">'+a.message[i]+"<span>")}else o.siblings(".messageError").remove(),o.removeClass("form-error").siblings("icon-required").addClass("error")}})},n=function(s){t||(s.preventDefault(),e(this).find('input[type="submit"]').attr("disabled","disabled"));var r=e(this),a=e(this).serialize(),o=r.attr("data-rules");e.ajax({url:i+"getValidation/"+o,dataType:"json",type:"post",data:a,success:function(s){if(e.isPlainObject(s)){t=!1;var a=s,i="";r.find("input").removeClass("form-error").siblings("icon-required").removeClass("error"),e.each(a.fields,function(e){r.find('[name="'+e+'"]').addClass("form-error").siblings("icon-required").addClass("error")});for(var o in a.messages)i=i+'<li class="error"> '+a.messages[o]+" </li>";l(r,i),r.find('input[type="submit"]').removeAttr("disabled")}else t=!0,r.submit()}})},l=function(s,r){s.find(".errors").remove(),s.prepend('<div class="errors"><ul>'+r+"</ul></div>"),e("html,body").animate({scrollTop:s.offset().top},300)}}).call(this,jQuery);