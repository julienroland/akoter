(function(e){var s,r=e("form.rules"),a=e('form.rules input:not([data-validator="false"],[autocomplete="off"],[type="submit"],[type="reset"]):visible, textarea:not([data-validator="false"],[autocomplete="off"],[type="submit"],[type="reset"]),textarea:visible'),i=(e(".showPassword"),"/"),t=!1;e(function(){r.on("submit",o),a.keydown(n),a.keyup(n),a.focus(n)});var n=function(){"undefined"==typeof s&&(s=JSON.parse(e(this).parents("form.rules").attr("data-rules")));var r=e(this).attr("name"),a=e(this).val();r.indexOf("[")>-1&&(r=r.substring(r.lastIndexOf("[")+1,r.lastIndexOf("]")));var t=s[r],n=e(this);if(""!==a&&(("password-ck"===r||"password_ck"===r)&&(a=e(this).val()+":"+n.parents("form").find('input[name="password"]').val()),"email_bc"===r&&(a=e(this).val()+":"+n.parents("form").find('input[name="email"]').val())),""!==a)var o=i+"getOneValidation/"+r+"/"+t+"/"+a;else var o=i+"getOneValidation/"+r+"/"+t;e.ajax({url:o,dataType:"json",type:"post",success:function(s){if(e.isPlainObject(s)){var a=s;n.find("input").removeClass("form-error").siblings("icon-required").removeClass("error").siblings(".clear").remove(),n.siblings(".messageError").remove(),e.each(a.field,function(){n.addClass("form-error").siblings("icon-required").addClass("error")});for(var i in a.message)n.next(".icon-required").length<1?n.after('<span class="'+r+' messageError">'+a.message[i]+"<span>"):n.next(".icon-required").after('<div class="clear"></div><span class="'+r+' messageError">'+a.message[i]+"<span>")}else n.siblings(".messageError").remove(),n.removeClass("form-error").siblings("icon-required").addClass("error")}})},o=function(s){t||(s.preventDefault(),e(this).find('input[type="submit"]').attr("disabled","disabled"));var r=e(this),a=e(this).serialize(),n=r.attr("data-rules");e.ajax({url:i+"getValidation/"+n,dataType:"json",type:"post",data:a,success:function(s){if(e.isPlainObject(s)){t=!1;var a=s,i="";r.find("input").removeClass("form-error").siblings("icon-required").removeClass("error"),e.each(a.fields,function(e){r.find('[name="'+e+'"]').addClass("form-error").siblings("icon-required").addClass("error")});for(var n in a.messages)i=i+'<li class="error"> '+a.messages[n]+" </li>";l(r,i),r.find('input[type="submit"]').removeAttr("disabled")}else t=!0,r.submit()}})},l=function(s,r){s.find(".errors").remove(),s.prepend('<div class="errors"><ul>'+r+"</ul></div>"),e("html,body").animate({scrollTop:s.offset().top},300)}}).call(this,jQuery);