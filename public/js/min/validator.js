(function(e){var s,r=e("form.rules"),a=e('form.rules input:not([data-validator="false"],[autocomplete="off"],[type="submit"],[type="reset"])'),i=(e(".showPassword"),"/"),n=!1;e(function(){r.on("submit",o),a.keydown(t),a.keyup(t),a.focus(t)});var t=function(){"undefined"==typeof s&&(s=JSON.parse(e(this).parents("form.rules").attr("data-rules")));var r=e(this).attr("name"),a=e(this).val();r.indexOf("[")>-1&&(r=r.substring(r.lastIndexOf("[")+1,r.lastIndexOf("]")));var n=s[r],t=e(this);if(""!==a&&(("password-ck"===r||"password_ck"===r)&&(a=e(this).val()+":"+t.parents("form").find('input[name="password"]').val()),"email_bc"===r&&(a=e(this).val()+":"+t.parents("form").find('input[name="email"]').val())),""!==a)var o=i+"getOneValidation/"+r+"/"+n+"/"+a;else var o=i+"getOneValidation/"+r+"/"+n;console.log(o),e.ajax({url:o,dataType:"json",type:"post",success:function(s){if(e.isPlainObject(s)){var a=s;t.find("input").removeClass("form-error").siblings("icon-required").removeClass("error").siblings(".clear").remove(),t.siblings(".messageError").remove(),e.each(a.field,function(){t.addClass("form-error").siblings("icon-required").addClass("error")});for(var i in a.message)t.next(".icon-required").length<1?t.after('<span class="'+r+' messageError">'+a.message[i]+"<span>"):t.next(".icon-required").after('<div class="clear"></div><span class="'+r+' messageError">'+a.message[i]+"<span>")}else t.siblings(".messageError").remove(),t.removeClass("form-error").siblings("icon-required").addClass("error")}})},o=function(s){n||(s.preventDefault(),e(this).find('input[type="submit"]').attr("disabled","disabled"));var r=e(this),a=e(this).serialize(),t=r.attr("data-rules");e.ajax({url:i+"getValidation/"+t,dataType:"json",type:"post",data:a,success:function(s){if(e.isPlainObject(s)){n=!1;var a=s,i="";r.find("input").removeClass("form-error").siblings("icon-required").removeClass("error"),e.each(a.fields,function(e){r.find('[name="'+e+'"]').addClass("form-error").siblings("icon-required").addClass("error")});for(var t in a.messages)i=i+'<li class="error"> '+a.messages[t]+" </li>";l(r,i),r.find('input[type="submit"]').removeAttr("disabled")}else n=!0,r.submit()}})},l=function(s,r){s.find(".errors").remove(),s.prepend('<div class="errors"><ul>'+r+"</ul></div>"),e("html,body").animate({scrollTop:s.offset().top},300)}}).call(this,jQuery);