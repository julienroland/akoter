(function(n){var e=n(".mapContainer"),t=n(".main"),o=n(".mapManage"),i=n(window),a,s=500,c=80,l=240,r=n(window).height(),u=n(window).width(),d=n("html,body"),f=n(".addInfos"),p=n(".banner"),h=n(".nav"),g=n(".mapItem"),m=n(".mapItem .accordeon"),v=n("body"),y=n(".kots").outerHeight(),k=n(".mapItem .tab"),b=0,w=n(".mapManage .search .content"),C=n("#zoom"),x=n(".researchBtn"),D=n(".ListingBtn"),L=n(".switchView"),j=n(".mapManage .research"),P=n(".mapManage .oneBuilding"),T=n('input[type="submit"]'),z=n("form"),q=n("#form-city"),I=n(".overlay"),M=n(".popup"),$=n(".popup.lang"),B=n(".popup.connection"),H=n(".popup.agence"),N=n(".closePopup"),O=n(".toSocialLogin"),S=n(".toEmailLogin"),U=n(".loginEmail"),_=n(".loginSocial"),A=n(".toPopup"),E=n(".errorsNotifications"),Q=n(".errorsNotifications .tab"),W=n(".errorsNotifications .list"),X=0,Y=n(".warning-tick"),F=n(".warning-tick-box"),V=n(".closeTickbox"),G=!1,J=n("#query"),K=n(".kots #container"),R=n(".kot:last").offset(),Z,ne=n(".loadmore"),ee=n(".pagination"),te=n(".pagination ul"),oe=[],ie=n(".agenceAjax"),ae="../img/locations/",se="../img/",ce=se+"noPhotoLocation.jpg",le="animated";n(function(){he(),m.drags({handle:".head"}),n(".typeLocation")&&ge(),Q.on("click","a",Le),n("html").on("click",De),E.on("click",function(n){n.stopPropagation()}),He(),Ne(),k.on("click","a",xe),A.on("click",ze),n(document).keyup(function(n){27==n.keyCode&&qe(n)}),N.on("click",qe),I.on("click",function(n){Ie(n)}),h.find(".connection").on("click","a",ze),O.on("click",Pe),S.on("click",Te),n(window).resize(function(){He(n(window).height()),Ne(n(window).width())}),n(".goTo").on("click",function(e){e.preventDefault(),Se(n("#main"))}),x.on("click",fe),D.on("click",de)});var re=function(){n(this).next(F).show()},ue=function(){n(this).next(F).hide()},de=function(e){e.preventDefault();var t=n(this);j.css("display","none"),P.css("display","block"),L.find("a").removeClass("active"),t.addClass("active")},fe=function(e){e.preventDefault();var t=n(this);P.css("display","none"),j.css("display","block"),L.find("a").removeClass("active"),t.addClass("active")},pe=function(e){e.preventDefault();var t=n(this).serialize();n.ajax({type:"post",async:!1,url:"/"+oLang.routes.account+"/{user_slug}/"+oLang.routes.add_agence,data:t,dataType:"json",success:function(n){"success"===n&&(alert(oLang.agence.success_save),I.click())}})},he=function(){n.ajax({type:"get",async:!1,url:"/getAllLang",dataType:"json",success:function(n){return oLang=n,console.log(n),!0}})},ge=function(){n(".typeLocation li").each(function(){$checkbox=n(this).find('input[type="checkbox"]'),$checkbox.css({visibility:"hidden",position:"absolute",left:"-99999999px"}),n(this).find("label").css({backgroundImage:"url(./img/"+$checkbox.attr("data-background")+")",backgroundPosition:"top",width:"100%",height:100,paddingTop:60,display:"block"})})},me=function(){K.masonry("appended",n(".kot.appended"))},ve=function(){var e=n("<link rel='stylesheet' type='text/css' href='../css/screen.css'>");n("head").append(e)},ye=function(n){return Math.round(n)/2},ke=function(n,e){return"lat"===e?n.split(",")[0]:n.split(",")[1]},be=function(e,t){if("undefined"!=typeof t){if("undefined"==typeof e)var e=oLang.key;var o=e;if("undefined"!=typeof e)return n.each(t,function(n,e){o=o.replace(":"+n,e)}),o}else{if("undefined"==typeof e)var e=oLang.key;var o=e;if("undefined"!=typeof e)return e}},we=function(n,e){return n>e?0>e-n&&e-n>-1?"half-one":"no-one":0>e-n&&e-n>-1?"half-one":"one"},Ce=function(){var e=n("#container");e.masonry({itemSelector:".kot",isOriginLeft:!0,isFitWidth:!0})},xe=function(n){n.preventDefault(),0===b?(g.css({left:"-220px"}),b=1):(g.css({left:"12px"}),b=0)},De=function(n){n.stopPropagation(),1===X&&(E.css({right:"-250px"}),X=0)},Le=function(n){n.preventDefault(),0===X?(E.css({right:"12px"}),X=1):(E.css({right:"-250px"}),X=0)},je=function(e,t){e.hasClass(t)?Q.removeClass(t).addClass(le).addClass(t).addClass(le).delay(1e3).queue(function(){n(this).removeClass(t).addClass(le).dequeue()}):Q.removeClass(le).addClass(t).addClass(le).delay(1e3).queue(function(){n(this).removeClass(t).addClass(le).dequeue()})},Pe=function(n){n.preventDefault(),U.slideUp(function(){_.slideDown()})},Te=function(n){n.preventDefault(),_.slideUp(function(){U.slideDown()})},ze=function(e){e.preventDefault(),e.stopPropagation();var t=n(this).attr("data-type");"lang"===t?(I.css("display","block"),$.css("display","block")):"connection"===t&&(I.css("display","block"),B.css("display","block"))},qe=function(n){n.preventDefault(),M.fadeOut("fast",function(){Me()})},Ie=function(n){n.preventDefault(),M.fadeOut("fast",function(){Me()})},Me=function(){I.css("display","none")},$e=function(){p.css(d.scrollTop()>f.height()+p.outerHeight()+a?{position:"fixed",top:0,left:0,right:0}:{position:"relative"})},Be=function(){d.scrollTop()>30?f.slideUp():f.slideDown()},He=function(i){e&&(a=i?(i-n(".banner").height())/100*c:(n(window).height()-n(".banner").height())/100*c,e.css({height:a,width:n(window).width()-240,"min-height":s}),o.css({height:a,"min-height":s}),t.css({height:"auto","min-height":"100%"}))},Ne=function(n){},Oe=function(n,e){return n/100*e},Se=function(e){n("html,body").animate({scrollTop:e.offset().top},"slow")}}).call(this,jQuery),function(n){n.fn.drags=function(e){if($that=n(this),e=n.extend({handle:"",cursor:"move"},e),""===e.handle)var t=this;else var t=this.find(e.handle);return t.css("cursor",e.cursor).on("mousedown",function(t){if(t.stopPropagation(),""===e.handle)var o=n(this).addClass("draggable");else{console.log(n(this));var o=n(this).addClass("active-handle");$that.addClass("draggable")}var i=o.css("z-index"),a=o.outerHeight(),s=o.outerWidth(),c=o.offset().top+a-t.pageY,l=o.offset().left+s-t.pageX;o.css("z-index",1e3).parents().on("mousemove",function(e){n(".draggable").offset({top:e.pageY+c-a,left:e.pageX+l-s}).on("mouseup",function(){n(this).removeClass("draggable").css("z-index",i)})}),t.preventDefault()}).on("mouseup",function(){""===e.handle?n(this).removeClass("draggable"):n(this).removeClass("active-handle").parent().removeClass("draggable")})}}.call(this,jQuery);